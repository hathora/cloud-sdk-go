// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"errors"
	"fmt"
	"github.com/hathora/cloud-sdk-go/hathoracloud/internal/utils"
	"time"
)

type LobbyV3CreatedByType string

const (
	LobbyV3CreatedByTypeStr    LobbyV3CreatedByType = "str"
	LobbyV3CreatedByTypeNumber LobbyV3CreatedByType = "number"
)

// LobbyV3CreatedBy - UserId or email address for the user that created the lobby.
type LobbyV3CreatedBy struct {
	Str    *string  `queryParam:"inline" name:"createdBy"`
	Number *float64 `queryParam:"inline" name:"createdBy"`

	Type LobbyV3CreatedByType
}

func CreateLobbyV3CreatedByStr(str string) LobbyV3CreatedBy {
	typ := LobbyV3CreatedByTypeStr

	return LobbyV3CreatedBy{
		Str:  &str,
		Type: typ,
	}
}

func CreateLobbyV3CreatedByNumber(number float64) LobbyV3CreatedBy {
	typ := LobbyV3CreatedByTypeNumber

	return LobbyV3CreatedBy{
		Number: &number,
		Type:   typ,
	}
}

func (u *LobbyV3CreatedBy) UnmarshalJSON(data []byte) error {

	var str string = ""
	if err := utils.UnmarshalJSON(data, &str, "", true, nil); err == nil {
		u.Str = &str
		u.Type = LobbyV3CreatedByTypeStr
		return nil
	}

	var number float64 = float64(0)
	if err := utils.UnmarshalJSON(data, &number, "", true, nil); err == nil {
		u.Number = &number
		u.Type = LobbyV3CreatedByTypeNumber
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for LobbyV3CreatedBy", string(data))
}

func (u LobbyV3CreatedBy) MarshalJSON() ([]byte, error) {
	if u.Str != nil {
		return utils.MarshalJSON(u.Str, "", true)
	}

	if u.Number != nil {
		return utils.MarshalJSON(u.Number, "", true)
	}

	return nil, errors.New("could not marshal union type LobbyV3CreatedBy: all fields are null")
}

// LobbyV3 - A lobby object allows you to store and manage metadata for your rooms.
type LobbyV3 struct {
	// User-defined identifier for a lobby.
	ShortCode string `json:"shortCode"`
	// When the lobby was created.
	CreatedAt time.Time `json:"createdAt"`
	// UserId or email address for the user that created the lobby.
	CreatedBy  LobbyV3CreatedBy `json:"createdBy"`
	RoomConfig *string          `json:"roomConfig,omitempty"`
	// Types of lobbies a player can create.
	//
	// `private`: the player who created the room must share the roomId with their friends
	//
	// `public`: visible in the public lobby list, anyone can join
	//
	// `local`: for testing with a server running locally
	Visibility LobbyVisibility `json:"visibility"`
	Region     Region          `json:"region"`
	// Unique identifier to a game session or match. Use the default system generated ID or overwrite it with your own.
	// Note: error will be returned if `roomId` is not globally unique.
	RoomID string `json:"roomId"`
	// System generated unique identifier for an application.
	AppID string `json:"appId"`
}

func (l LobbyV3) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(l, "", false)
}

func (l *LobbyV3) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &l, "", false, []string{"shortCode", "createdAt", "createdBy", "visibility", "region", "roomId", "appId"}); err != nil {
		return err
	}
	return nil
}

func (l *LobbyV3) GetShortCode() string {
	if l == nil {
		return ""
	}
	return l.ShortCode
}

func (l *LobbyV3) GetCreatedAt() time.Time {
	if l == nil {
		return time.Time{}
	}
	return l.CreatedAt
}

func (l *LobbyV3) GetCreatedBy() LobbyV3CreatedBy {
	if l == nil {
		return LobbyV3CreatedBy{}
	}
	return l.CreatedBy
}

func (l *LobbyV3) GetRoomConfig() *string {
	if l == nil {
		return nil
	}
	return l.RoomConfig
}

func (l *LobbyV3) GetVisibility() LobbyVisibility {
	if l == nil {
		return LobbyVisibility("")
	}
	return l.Visibility
}

func (l *LobbyV3) GetRegion() Region {
	if l == nil {
		return Region("")
	}
	return l.Region
}

func (l *LobbyV3) GetRoomID() string {
	if l == nil {
		return ""
	}
	return l.RoomID
}

func (l *LobbyV3) GetAppID() string {
	if l == nil {
		return ""
	}
	return l.AppID
}
